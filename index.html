<!DOCTYPE html>
<html lang="en-US">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-149266625-3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-149266625-3');
    </script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon"
        href="https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/120/whatsapp/224/smiling-face-with-sunglasses_1f60e.png" />
    <title>Emoji Trends by Enric Moreu</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/roughjs@3.1.0/dist/rough.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-rough@0.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-deferred@1"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Fredoka+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Luckiest+Guy&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="./style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

</head>



<body>
    <h1>EMOJI TRENDS</h1>
    <h2>How emojis are used on Twitter</h2>
    <h3><a href="https://enricmor.eu">by Enric Moreu</a></h3>
    <button type="button" onclick="smoothScroll(document.getElementById('soccer_ball'))">âš½</button>
    <button type="button" onclick="smoothScroll(document.getElementById('bee'))">ğŸ</button>
    <button type="button" onclick="smoothScroll(document.getElementById('beer'))">ğŸº</button>
    <button type="button" onclick="smoothScroll(document.getElementById('uk'))">ğŸ‡¬ğŸ‡§</button>
    <button type="button" onclick="smoothScroll(document.getElementById('american_football'))">ğŸˆ</button>
    <button type="button" onclick="smoothScroll(document.getElementById('spain'))">ğŸ‡ªğŸ‡¸</button>
    <button type="button" onclick="smoothScroll(document.getElementById('reminder_ribbon'))">ğŸ—ï¸</button>
    <button type="button" onclick="smoothScroll(document.getElementById('shooting_star'))">ğŸŒ </button>
    <button type="button" onclick="smoothScroll(document.getElementById('factory'))">ğŸ­</button>
    <button type="button" onclick="smoothScroll(document.getElementById('pig'))">ğŸ–</button>
    <button type="button" onclick="smoothScroll(document.getElementById('panda'))">ğŸ¼</button>
    <button type="button" onclick="smoothScroll(document.getElementById('snake'))">ğŸ</button>
    <button type="button" onclick="smoothScroll(document.getElementById('santa_claus'))">ğŸ…</button>
    <button type="button" onclick="smoothScroll(document.getElementById('fuel_pump'))">â›½</button>
    <button type="button" onclick="smoothScroll(document.getElementById('video_game'))">ğŸ®</button>
    <button type="button" onclick="smoothScroll(document.getElementById('chart_increasing'))">ğŸ“ˆ</button>
    <button type="button" onclick="smoothScroll(document.getElementById('chart_decreasing'))">ğŸ“‰</button>
    <button type="button" onclick="smoothScroll(document.getElementById('japan'))">ğŸ‡¯ğŸ‡µ</button>
    <button type="button" onclick="smoothScroll(document.getElementById('south_korea'))">ğŸ‡°ğŸ‡·</button>
    <button type="button" onclick="smoothScroll(document.getElementById('germany'))">ğŸ‡©ğŸ‡ª</button>
    <button type="button" onclick="smoothScroll(document.getElementById('china'))">ğŸ‡¨ğŸ‡³</button>
    <button type="button" onclick="smoothScroll(document.getElementById('france'))">ğŸ‡«ğŸ‡·</button>
    <button type="button" onclick="smoothScroll(document.getElementById('italy'))">ğŸ‡®ğŸ‡¹</button>
    <button type="button" onclick="smoothScroll(document.getElementById('money_with_wings'))">ğŸ’¸</button>
    <button type="button" onclick="smoothScroll(document.getElementById('rose'))">ğŸŒ¹</button>
    <button type="button" onclick="smoothScroll(document.getElementById('recycling_symbol'))">â™»ï¸</button>
    <button type="button" onclick="smoothScroll(document.getElementById('broken_heart'))">ğŸ’”</button>
    <button type="button" onclick="smoothScroll(document.getElementById('angry_face'))">ğŸ˜ </button>

    <div class="container">
        <div class="row">
            <div class="col-12 mt-4">
                <div class="card category">
                    Soccer Ball âš½
                    <div class="card-body" id="box">
                        <canvas id="soccer_ball" style="min-height: 50vh"></canvas>
                    </div>
                </div>

                <div class="card category">
                    Bee ğŸ
                    <div class="card-body" id="box">
                        <canvas id="bee" style="min-height: 50vh"></canvas>
                    </div>
                </div>

                <div class="card category">
                    Beer ğŸº
                    <div class="card-body" id="box">
                        <canvas id="beer" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    United Kingdom ğŸ‡¬ğŸ‡§
                    <div class="card-body" id="box">
                        <canvas id="uk" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    American Football ğŸˆ
                    <div class="card-body" id="box">
                        <canvas id="american_football" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Spain ğŸ‡ªğŸ‡¸
                    <div class="card-body" id="box">
                        <canvas id="spain" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Reminder Ribbon ğŸ—ï¸
                    <div class="card-body" id="box">
                        <canvas id="reminder_ribbon" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Shooting Star ğŸŒ 
                    <div class="card-body" id="box">
                        <canvas id="shooting_star" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Factory ğŸ­
                    <div class="card-body" id="box">
                        <canvas id="factory" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Pig ğŸ–
                    <div class="card-body" id="box">
                        <canvas id="pig" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Panda ğŸ¼
                    <div class="card-body" id="box">
                        <canvas id="panda" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Snake ğŸ
                    <div class="card-body" id="box">
                        <canvas id="snake" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Santa Claus ğŸ…
                    <div class="card-body" id="box">
                        <canvas id="santa_claus" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Fuel Pump â›½
                    <div class="card-body" id="box">
                        <canvas id="fuel_pump" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Video Game ğŸ®
                    <div class="card-body" id="box">
                        <canvas id="video_game" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Chart Increasing ğŸ“ˆ
                    <div class="card-body" id="box">
                        <canvas id="chart_increasing" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Chart Decreasing ğŸ“‰
                    <div class="card-body" id="box">
                        <canvas id="chart_decreasing" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Japan ğŸ‡¯ğŸ‡µ
                    <div class="card-body" id="box">
                        <canvas id="japan" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    South Korea ğŸ‡°ğŸ‡·
                    <div class="card-body" id="box">
                        <canvas id="south_korea" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Germany ğŸ‡©ğŸ‡ª
                    <div class="card-body" id="box">
                        <canvas id="germany" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    China ğŸ‡¨ğŸ‡³
                    <div class="card-body" id="box">
                        <canvas id="china" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    France ğŸ‡«ğŸ‡·
                    <div class="card-body" id="box">
                        <canvas id="france" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Italy ğŸ‡®ğŸ‡¹
                    <div class="card-body" id="box">
                        <canvas id="italy" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Money with Wings ğŸ’¸
                    <div class="card-body" id="box">
                        <canvas id="money_with_wings" style="min-height: 50vh"></canvas>
                    </div>
                </div>


                <div class="card category">
                    Rose ğŸŒ¹
                    <div class="card-body" id="box">
                        <canvas id="rose" style="min-height: 50vh"></canvas>
                    </div>
                </div>

                <div class="card category">
                    Recycling Symbol â™»ï¸
                    <div class="card-body" id="box">
                        <canvas id="recycling_symbol" style="min-height: 50vh"></canvas>
                    </div>
                </div>

                <div class="card category">
                    Broken Hearth ğŸ’”
                    <div class="card-body" id="box">
                        <canvas id="broken_heart" style="min-height: 50vh"></canvas>
                    </div>
                </div>

                <div class="card category">
                    Angry Face ğŸ˜ 
                    <div class="card-body" id="box">
                        <canvas id="angry_face" style="min-height: 50vh"></canvas>
                    </div>
                </div>


            </div>
        </div>
    </div>
    </div>

    <script>
        window.smoothScroll = function (target) {
            var scrollContainer = target;
            do { //find scroll container
                scrollContainer = scrollContainer.parentNode;
                if (!scrollContainer) return;
                scrollContainer.scrollTop += 1;
            } while (scrollContainer.scrollTop == 0);

            var targetY = 0;
            do { //find the top of target relatively to the container
                if (target == scrollContainer) break;
                targetY += target.offsetTop;
            } while (target = target.offsetParent);

            scroll = function (c, a, b, i) {
                i++; if (i > 29.5) return;
                c.scrollTop = a + (b - a) / 30 * i;
                setTimeout(function () { scroll(c, a, b, i); }, 20);
            }
            // start scrolling
            scroll(scrollContainer, scrollContainer.scrollTop, targetY, 0);
        }
    </script>


    <script>
        const monthNames = ["January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
        ];
        var annotations = {};
        annotations["soccer_ball"] = [
            ["2014-06-12", "Brazil World Cup 2014 started ğŸ‡§ğŸ‡·"]
        ];
        annotations["beer"] = [
            ["2014-07-04", "USA Independence Day ğŸ‡ºğŸ‡¸"],
            ["2013-07-04", "USA Independence Day ğŸ‡ºğŸ‡¸"],
        ];
        function makeChart(dates, emoji_name, emoji, color1) {
            var day = dates.map(function (d) {
                return d.day;
            });
            var usage = dates.map(function (d) {
                return d.usage;
            });

            Chart.defaults.global.legend = false;
            Chart.defaults.global.animation.duration = 1300;
            Chart.defaults.global.tooltips.intersect = false;
            Chart.defaults.global.tooltips.borderWidth = 3;
            Chart.defaults.global.tooltips.borderColor = 'black';
            Chart.defaults.global.tooltips.yAlign = 'bottom';
            Chart.defaults.global.tooltips.backgroundColor = 'white';
            Chart.defaults.global.tooltips.titleFontSize = 16;
            Chart.defaults.global.tooltips.titleFontColor = 'black';
            Chart.defaults.global.tooltips.bodyFontColor = '#000';
            Chart.defaults.global.tooltips.bodyFontSize = 14;
            Chart.defaults.global.tooltips.displayColors = false;
            Chart.defaults.global.defaultFontFamily = '"Fredoka One", cursive';
            Chart.defaults.global.maintainAspectRatio = false;
            Chart.defaults.global.responsive = true;

            scale_options = {

                yAxes: [{ display: false }],
                xAxes: [{
                    type: 'time',
                    time: {
                        unit: 'year'
                    },
                    ticks: {
                        fontColor: 'black',
                        fontSize: 18,
                    },
                    gridLines: {
                        display: false
                    },
                }],

            };

            var football = document.getElementById(emoji_name);
            new Chart(football.getContext("2d"), {
                plugins: [
                    ChartRough,
                    { deferred: { yOffset: 1, delay: 3200, } }
                ],
                type: ['line'],
                options: {
                    layout: {
                        padding: {
                            left: 0,
                            right: 0,
                            top: 100,
                            bottom: 0
                        }
                    },
                    scales: scale_options,
                    tooltips: {
                        caretPadding: 10,
                        caretSize: 7,
                        cornerRadius: 15,
                        titleFontSize: 18,
                        titleFontStyle: 'normal',
                        titleFontColor: 'black',
                        titleSpacing: 1,
                        bodyFontStyle: 'bold',
                        bodyFontSize: 18,
                        bodySpacing: 3,
                        callbacks: {
                            title: function (tooltipItem) {
                                var date = new Date(tooltipItem[0].xLabel);
                                year = date.getFullYear();
                                month = monthNames[date.getMonth()];
                                day = date.getDate();
                                var multistringText = [month + " " + day + ", " + year];
                                multistringText.push(Number(Math.floor(tooltipItem[0].yLabel)).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + " people tweeted a " + emoji);
                                sentiment = (tooltipItem[0].yLabel % 1) * 1000 - 100;
                                console.log(sentiment)
                                if (sentiment == -100) {
                                    return multistringText;
                                } else if (sentiment > 100) {
                                    multistringText.push(parseInt(sentiment / 10) + "% negative tweetsğŸ˜¡");
                                } else {
                                    multistringText.push(parseInt(sentiment) + "% positive tweetsğŸ˜€");
                                }
                                return multistringText;
                            },
                            label: function (tooltipItem) {
                                if (emoji_name in annotations) {
                                    for (date in annotations[emoji_name]) {
                                        if (annotations[emoji_name][date][0] == tooltipItem.xLabel) {
                                            return annotations[emoji_name][date][1];
                                        }
                                    }
                                } else {
                                    return ""
                                }

                            },
                        }
                    }
                },
                data: {
                    labels: day,
                    datasets: [{
                        backgroundColor: color1,
                        data: usage,
                        pointRadius: 0,
                        pointHoverRadius: 6,
                        hoverBackgroundColor: 'black',
                        pointHoverBorderColor: 'black',
                        pointHitRadius: 30,
                        pointHoverBorderWidth: 3,
                        pointBackgroundColor: color1,
                        pointBorderColor: color1,
                        borderColor: 'black',
                        rough: {
                            roughness: 1.5,
                            bowing: 0,
                            fillStyle: 'hachure',
                            fillWeight: 4,
                            hachureAngle: -41,
                            hachureGap: 6,
                            // curveStepCount: 70,
                            simplification: 0
                        }
                    }]
                }
            });
        }

        Promise.all([
            d3.csv("data/emojis_50/soccer_ball.csv"),
            d3.csv("data/emojis_50/bee.csv"),
            d3.csv("data/emojis_50/beer.csv"),
            d3.csv("data/emojis_50/uk.csv"),
            d3.csv("data/emojis_50/american_football.csv"),
            d3.csv("data/emojis_50/spain.csv"),
            d3.csv("data/emojis_50/reminder_ribbon.csv"),
            d3.csv("data/emojis_50/shooting_star.csv"),
            d3.csv("data/emojis_50/factory.csv"),
            d3.csv("data/emojis_50/pig.csv"),
            d3.csv("data/emojis_50/panda.csv"),
            d3.csv("data/emojis_50/snake.csv"),
            d3.csv("data/emojis_50/santa_claus.csv"),
            d3.csv("data/emojis_50/fuel_pump.csv"),
            d3.csv("data/emojis_50/video_game.csv"),
            d3.csv("data/emojis_50/chart_increasing.csv"),
            d3.csv("data/emojis_50/chart_decreasing.csv"),
            d3.csv("data/emojis_50/japan.csv"),
            d3.csv("data/emojis_50/south_korea.csv"),
            d3.csv("data/emojis_50/germany.csv"),
            d3.csv("data/emojis_50/china.csv"),
            d3.csv("data/emojis_50/france.csv"),
            d3.csv("data/emojis_50/italy.csv"),
            d3.csv("data/emojis_50/money_with_wings.csv"),
            d3.csv("data/emojis_50/rose.csv"),
            d3.csv("data/emojis_50/recycling_symbol.csv"),
            d3.csv("data/emojis_50/broken_heart.csv"),
            d3.csv("data/emojis_50/angry_face.csv"),
        ]).then(function (files) {
            makeChart(files[0], 'soccer_ball', 'âš½', '#00188f');
            makeChart(files[1], 'bee', 'ğŸ', '#ff3ad4');
            makeChart(files[2], 'beer', 'ğŸº', '#f40e0e');
            makeChart(files[3], 'uk', 'ğŸ‡¬ğŸ‡§', '#009e49');
            makeChart(files[4], 'american_football', 'ğŸˆ', '#00188f');
            makeChart(files[5], 'spain', 'ğŸ‡ªğŸ‡¸', '#ff3ad4');
            makeChart(files[6], 'reminder_ribbon', 'ğŸ—ï¸', '#f40e0e');
            makeChart(files[7], 'shooting_star', 'ğŸŒ ', '#009e49');
            makeChart(files[8], 'factory', 'ğŸ­', '#00188f');
            makeChart(files[9], 'pig', 'ğŸ–', '#ff3ad4');
            makeChart(files[10], 'panda', 'ğŸ¼', '#f40e0e');
            makeChart(files[11], 'snake', 'ğŸ', '#009e49');
            makeChart(files[12], 'santa_claus', 'ğŸ…', '#00188f');
            makeChart(files[13], 'fuel_pump', 'â›½', '#ff3ad4');
            makeChart(files[14], 'video_game', 'ğŸ®', '#f40e0e');
            makeChart(files[15], 'chart_increasing', 'ğŸ“ˆ', '#009e49');
            makeChart(files[16], 'chart_decreasing', 'ğŸ“‰', '#00188f');
            makeChart(files[17], 'japan', 'ğŸ‡¯ğŸ‡µ', '#ff3ad4');
            makeChart(files[18], 'south_korea', 'ğŸ‡°ğŸ‡·', '#f40e0e');
            makeChart(files[19], 'germany', 'ğŸ‡©ğŸ‡ª', '#009e49');
            makeChart(files[20], 'china', 'ğŸ‡¨ğŸ‡³', '#00188f');
            makeChart(files[21], 'france', 'ğŸ‡«ğŸ‡·', '#ff3ad4');
            makeChart(files[22], 'italy', 'ğŸ‡®ğŸ‡¹', '#f40e0e');
            makeChart(files[23], 'money_with_wings', 'ğŸ’¸', '#009e49');
            makeChart(files[24], 'rose', 'ğŸŒ¹', '#00188f');
            makeChart(files[25], 'recycling_symbol', 'â™»ï¸', '#ff3ad4');
            makeChart(files[26], 'broken_heart', 'ğŸ’”', '#f40e0e');
            makeChart(files[27], 'angry_face', 'ğŸ˜ ', '#009e49');
        })


    </script>

</body>

</html>